[gd_scene load_steps=7 format=3 uid="uid://ctd13mbtkg4w"]

[ext_resource type="Script" uid="uid://dv3jdsalftjbv" path="res://GUI/ComputerUI/pc_gui_macky.gd" id="1_tp4eq"]
[ext_resource type="PackedScene" uid="uid://dwuxkxcvrv88b" path="res://Scenes/GUI/Ransomware/ComputerUI.tscn" id="2_je1oo"]
[ext_resource type="PackedScene" uid="uid://bcejk3vddejkh" path="res://Scenes/GUI/CleanUI/window.tscn" id="3_tp4eq"]
[ext_resource type="Script" uid="uid://dckq8i5rw622n" path="res://GUI/ComputerUI/ransomware#2.gd" id="5_tmtoj"]

[sub_resource type="Shader" id="Shader_wwpmy"]
code = "shader_type canvas_item;
render_mode blend_mix, unshaded;

// The full color of the rectangle
uniform vec4 rect_color : source_color = vec4(1.0, 0.2, 0.2, 1.0); // red

// Hole configuration
uniform vec2 hole_position = vec2(0.0, 0.0); // Top-left corner of the hole (in pixels)
uniform vec2 hole_size = vec2(50.0, 50.0);   // Width and height of the hole (square or rectangle)

void fragment() {
    // Convert UV to local pixel coordinates
    vec2 pixel_pos = UV * vec2(textureSize(TEXTURE, 0));

    // Check if we're inside the hole area
    bool in_hole = pixel_pos.x > hole_position.x &&
                   pixel_pos.x < hole_position.x + hole_size.x &&
                   pixel_pos.y > hole_position.y &&
                   pixel_pos.y < hole_position.y + hole_size.y;

    if (in_hole) {
        discard; // Make transparent
    }

    COLOR = rect_color;
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rtgtv"]
shader = SubResource("Shader_wwpmy")
shader_parameter/rect_color = Color(0, 0, 0, 0.505882)
shader_parameter/hole_position = Vector2(0.115, 3.57)
shader_parameter/hole_size = Vector2(3.495, 1.53)

[node name="ComputerGUI" type="TabContainer"]
anchors_preset = -1
anchor_left = -0.089726
anchor_top = -0.151924
anchor_right = 1.08973
anchor_bottom = 1.15192
offset_left = 103.364
offset_top = 98.4466
offset_right = -103.364
offset_bottom = -98.4466
grow_horizontal = 2
grow_vertical = 2
current_tab = 0
tabs_visible = false
script = ExtResource("1_tp4eq")
metadata/_edit_use_anchors_ = true

[node name="Margin" parent="." instance=ExtResource("2_je1oo")]
layout_mode = 2

[node name="Icon6" parent="Margin/Desktop" index="5"]
visible = true

[node name="RadialMenu" parent="Margin/Desktop" index="6"]
custom_minimum_size = Vector2(300, 222.263)

[node name="Window" parent="Margin" index="1"]
visible = false

[node name="windowsUI2" parent="Margin" instance=ExtResource("3_tp4eq")]
visible = false
layout_mode = 2

[node name="Ransomware#2" type="MarginContainer" parent="."]
visible = false
layout_mode = 2
theme_override_constants/margin_left = 75
theme_override_constants/margin_top = 75
theme_override_constants/margin_right = 75
theme_override_constants/margin_bottom = 75
script = ExtResource("5_tmtoj")
metadata/_tab_index = 1

[node name="Overlay" type="ColorRect" parent="Ransomware#2"]
material = SubResource("ShaderMaterial_rtgtv")
custom_minimum_size = Vector2(1080, 0)
layout_mode = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="CodeEdit" type="CodeEdit" parent="Ransomware#2"]
custom_minimum_size = Vector2(1300, 0)
layout_mode = 2
size_flags_horizontal = 0
theme_override_font_sizes/font_size = 33
text = "import os
from cryptography.fernet import fernet

allfiles = [ ]
for file in os.listdir (  )  : 
        if file == \"malware\"  or  file  ==  \"key.key\"  or  file ==  \"decry\" :   
                  continue
        if os.path.isfile (file) :  allfiles.append (file)

print (allfiles)

with  open (\"key.key\",  \"rb)  as key; 
        password  = key.read( )
passphrase  = \"WhiteHaT\" 
userpass  = input (\"Enter the password you received from us:  \") 
if userpass == passphrase:  
        for file in allfiles:  
                with  open(file,  \"rb\")  as the file: 
                        contents  = thefile.read( )                                 
                content_decr  = Fernet (password) .decrypt (contents)
                with open (file, \"wb\")  as  thefile:
                        thefile.write(content_decr)
                print (\"You got your files back\")
else;
print (\"Wrong password!  Pay to receive the right password\")"
gutters_draw_breakpoints_gutter = true
gutters_draw_bookmarks = true
gutters_draw_executing_lines = true
gutters_draw_line_numbers = true
gutters_zero_pad_line_numbers = true

[node name="HFlowContainer" type="HFlowContainer" parent="Ransomware#2"]
custom_minimum_size = Vector2(350, 0)
layout_mode = 2
size_flags_horizontal = 8
alignment = 1
last_wrap_alignment = 2

[node name="RichTextLabel" type="RichTextLabel" parent="Ransomware#2/HFlowContainer"]
texture_filter = 1
layout_mode = 2
size_flags_horizontal = 3
theme_override_font_sizes/normal_font_size = 33
fit_content = true

[node name="Spacing" type="Panel" parent="Ransomware#2/HFlowContainer"]
modulate = Color(1, 1, 1, 0)
custom_minimum_size = Vector2(400, 40)
layout_mode = 2

[node name="Buttons" type="Panel" parent="Ransomware#2/HFlowContainer"]
self_modulate = Color(1, 1, 1, 0)
custom_minimum_size = Vector2(400, 40.18)
layout_mode = 2
size_flags_vertical = 8

[node name="Back" type="Button" parent="Ransomware#2/HFlowContainer/Buttons"]
layout_mode = 1
anchors_preset = -1
anchor_top = -0.0701842
anchor_right = 0.165
anchor_bottom = 1.0
offset_top = 12.0
offset_right = -21.0
grow_vertical = 0
theme_override_font_sizes/font_size = 25
text = "Back"
metadata/_edit_use_anchors_ = true

[node name="Next" type="Button" parent="Ransomware#2/HFlowContainer/Buttons"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.835
anchor_top = -0.0701842
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 21.0
offset_top = 12.0
grow_horizontal = 0
grow_vertical = 0
theme_override_font_sizes/font_size = 25
text = "Next"
metadata/_edit_use_anchors_ = true

[connection signal="pressed" from="Margin/Desktop/Malware/Button" to="." method="_on_malware_button_pressed"]
[connection signal="button_down" from="Ransomware#2/HFlowContainer/Buttons/Back" to="Ransomware#2" method="_on_back_button_down"]
[connection signal="button_down" from="Ransomware#2/HFlowContainer/Buttons/Next" to="Ransomware#2" method="_on_next_button_down"]

[editable path="Margin"]
[editable path="Margin/Desktop/PDFIcon"]
[editable path="Margin/Desktop/imageIcon"]
[editable path="Margin/Desktop/companyFile"]
[editable path="Margin/Desktop/Malware"]
[editable path="Margin/Desktop/Icon5"]
[editable path="Margin/Desktop/Icon6"]
[editable path="Margin/Window"]
