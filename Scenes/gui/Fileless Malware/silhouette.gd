extends ColorRect

# msfvenom
@onready var explanation_part_1: Label = $"../Sourcecode_Msfvenom/Explanation Part1"
@onready var explanation_part_2: Label = $"../Sourcecode_Msfvenom/Explanation Part2"
@onready var explanation_part_3: Label = $"../Sourcecode_Msfvenom/Explanation Part3"
@onready var explanation_part_4: Label = $"../Sourcecode_Msfvenom/Explanation Part4"
@onready var sourcecode_msfvenom: Label = $"../Sourcecode_Msfvenom"

# apache
@onready var sourcecode_apache: Label = $"../Sourcecode_Apache"
@onready var explanation_part_1_apache: Label = $"../Sourcecode_Apache/Explanation Part1"
@onready var explanation_part_2_apache: Label = $"../Sourcecode_Apache/Explanation Part2"
@onready var explanation_part_3_apache: Label = $"../Sourcecode_Apache/Explanation Part3"
@onready var explanation_part_4_apache: Label = $"../Sourcecode_Apache/Explanation Part4"
@onready var explanation_part_5_apache: Label = $"../Sourcecode_Apache/Explanation Part5"

# Metasploit
@onready var sourcecode_metasploit: Label = $"../Sourcecode_Metasploit"
@onready var explanation_part_1_metasploit: Label = $"../Sourcecode_Metasploit/Explanation Part1"
@onready var explanation_part_2_metasploit: Label = $"../Sourcecode_Metasploit/Explanation Part2"
@onready var explanation_part_3_metasploit: Label = $"../Sourcecode_Metasploit/Explanation Part3"
@onready var explanation_part_4_metasploit: Label = $"../Sourcecode_Metasploit/Explanation Part4"
@onready var explanation_part_5_metasploit: Label = $"../Sourcecode_Metasploit/Explanation Part5"

var scene_index := 0

func _ready() -> void:
	sourcecode_apache.visible = false
	sourcecode_msfvenom.visible = true
	sourcecode_metasploit.visible = false
	_silhouette_line1()

func _process(delta: float) -> void:
	if Input.is_action_just_pressed("ui_accept"):
		if scene_index == 0:
			_silhouette_line2()
		elif scene_index == 1:
			_silhouette_line3()
		elif scene_index == 2:
			_silhouette_line4()
		elif scene_index == 3:
			_silhouette_apache()
		elif scene_index == 4:
			_silhouette_apache_line2()
		elif scene_index == 5:
			_silhouette_apache_line3()
		elif scene_index == 6:
			_silhouette_apache_line4()
		elif scene_index == 7:
			_silhouette_apache_line5()
		elif scene_index == 8:
			_silhouette_metasploit()
		elif scene_index == 9:
			_silhouette_metasploit_line2()
		elif scene_index == 10:
			_silhouette_metasploit_line3()
		elif scene_index == 11:
			_silhouette_metasploit_line4()
		elif scene_index == 12:
			_silhouette_metasploit_line5()

	elif Input.is_action_just_pressed("exit_ui"):
		if scene_index == 1:
			_silhouette_line1()
		elif scene_index == 2:
			_silhouette_line2()
		elif scene_index == 3:
			_silhouette_line3()
		elif scene_index == 4:
			_silhouette_line4()
		elif scene_index == 5:
			_silhouette_apache()
		elif scene_index == 6:
			_silhouette_apache_line2()
		elif scene_index == 7:
			_silhouette_apache_line3()
		elif scene_index == 8:
			_silhouette_apache_line4()
		elif scene_index == 9:
			_silhouette_apache_line5()
		elif scene_index == 10:
			_silhouette_metasploit()
		elif scene_index == 11:
			_silhouette_metasploit_line2()
		elif scene_index == 12:
			_silhouette_metasploit_line3()
		elif scene_index == 13:
			_silhouette_metasploit_line4()

func _update_shader(pos: Vector2, size: Vector2) -> void:
	if material is ShaderMaterial:
		material.set_shader_parameter("hole_position", pos)
		material.set_shader_parameter("hole_size", size)

func _silhouette_line1() -> void:
	scene_index = 0
	_update_shader(Vector2(0.015, 0.31), Vector2(2.05, 0.33))
	explanation_part_1.visible = true
	explanation_part_2.visible = false
	explanation_part_3.visible = false
	explanation_part_4.visible = false
	
func _silhouette_line2() -> void:
	scene_index = 1
	_update_shader(Vector2(0.015, 0.75), Vector2(2.05, 0.25))
	explanation_part_1.visible = false
	explanation_part_2.visible = true
	explanation_part_3.visible = false
	explanation_part_4.visible = false
	
func _silhouette_line3() -> void:
	scene_index = 2
	_update_shader(Vector2(0.015, 1), Vector2(2.05, 0.44))
	explanation_part_1.visible = false
	explanation_part_2.visible = false
	explanation_part_3.visible = true
	explanation_part_4.visible = false
	
func _silhouette_line4() -> void:
	scene_index = 3
	_update_shader(Vector2(0.015, 1.45), Vector2(2.05, 0.1))
	explanation_part_1.visible = false
	explanation_part_2.visible = false
	explanation_part_3.visible = false
	explanation_part_4.visible = true
	
func _silhouette_apache() -> void:
	scene_index = 4
	_update_shader(Vector2(0.015, 0.31), Vector2(2.05, 0.13))
	sourcecode_msfvenom.visible = false
	sourcecode_apache.visible = true
	explanation_part_1_apache.visible = true
	explanation_part_2_apache.visible = false
	explanation_part_3_apache.visible = false
	explanation_part_4_apache.visible = false
	explanation_part_5_apache.visible = false

func _silhouette_apache_line2() -> void:
	scene_index = 5
	_update_shader(Vector2(0.015, 0.44), Vector2(2.05, 0.11))
	explanation_part_1_apache.visible = false
	explanation_part_2_apache.visible = true
	explanation_part_3_apache.visible = false
	explanation_part_4_apache.visible = false
	explanation_part_5_apache.visible = false
	
func _silhouette_apache_line3() -> void:
	scene_index = 6
	_update_shader(Vector2(0.015, 0.56), Vector2(2.05, 0.11))
	explanation_part_1_apache.visible = false
	explanation_part_2_apache.visible = false
	explanation_part_3_apache.visible = true
	explanation_part_4_apache.visible = false
	explanation_part_5_apache.visible = false
	
func _silhouette_apache_line4() -> void:
	scene_index = 7
	_update_shader(Vector2(0.015, 0.66), Vector2(2.05, 1.35))
	explanation_part_1_apache.visible = false
	explanation_part_2_apache.visible = false
	explanation_part_3_apache.visible = false
	explanation_part_4_apache.visible = true
	explanation_part_5_apache.visible = false
	
func _silhouette_apache_line5() -> void:
	scene_index = 8
	_update_shader(Vector2(0.015, 2), Vector2(2.05, 0.11))
	explanation_part_1_apache.visible = false
	explanation_part_2_apache.visible = false
	explanation_part_3_apache.visible = false
	explanation_part_4_apache.visible = false
	explanation_part_5_apache.visible = true

func _silhouette_metasploit() -> void:
	scene_index = 9
	_update_shader(Vector2(0.015, 0.31), Vector2(2.05, 0.13))
	sourcecode_msfvenom.visible = false
	sourcecode_apache.visible = false
	sourcecode_metasploit.visible = true
	explanation_part_1_metasploit.visible = true
	explanation_part_2_metasploit.visible = false
	explanation_part_3_metasploit.visible = false
	explanation_part_4_metasploit.visible = false
	explanation_part_5_metasploit.visible = false
	
func _silhouette_metasploit_line2() -> void:
	scene_index = 10
	_update_shader(Vector2(0.015, 0.43), Vector2(2.05, 0.35))
	explanation_part_1_metasploit.visible = false
	explanation_part_2_metasploit.visible = true
	explanation_part_3_metasploit.visible = false
	explanation_part_4_metasploit.visible = false
	explanation_part_5_metasploit.visible = false
	
func _silhouette_metasploit_line3() -> void:
	scene_index = 11
	_update_shader(Vector2(0.015, 0.76), Vector2(2.05, 0.22))
	explanation_part_1_metasploit.visible = false
	explanation_part_2_metasploit.visible = false
	explanation_part_3_metasploit.visible = true
	explanation_part_4_metasploit.visible = false
	explanation_part_5_metasploit.visible = false
	
func _silhouette_metasploit_line4() -> void:
	scene_index = 12
	_update_shader(Vector2(0.015, 0.97), Vector2(2.05, 0.23))
	explanation_part_1_metasploit.visible = false
	explanation_part_2_metasploit.visible = false
	explanation_part_3_metasploit.visible = false
	explanation_part_4_metasploit.visible = true
	explanation_part_5_metasploit.visible = false

func _silhouette_metasploit_line5() -> void:
	scene_index = 13
	_update_shader(Vector2(0.015, 1.2), Vector2(2.05, 1.7))
	explanation_part_1_metasploit.visible = false
	explanation_part_2_metasploit.visible = false
	explanation_part_3_metasploit.visible = false
	explanation_part_4_metasploit.visible = false
	explanation_part_5_metasploit.visible = true
	
